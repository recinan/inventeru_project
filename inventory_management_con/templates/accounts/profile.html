{% extends "partials/_base.html" %}
{% load crispy_forms_tags %}

{% block content %}
    <div class="container-fluid">
        <div class="row justify-content-center">
            <!-- Formun genişliği genişletildi, ancak yine de ortalanacak -->
            <div class="col-lg-6 col-md-10 col-12 mt-5 mb-5">
                <div class="content-section tutorial-style p-5" style="min-height: 65vh; border: 1px solid #ddd; border-radius: 8px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <!-- Form başlığını ortalamak için text-center sınıfı eklendi -->
                    <legend class="border-bottom mb-4 text-center">Profile Information</legend>
                    <form method="POST" enctype="multipart/form-data" class="w-100">
                        {% csrf_token %}
                        {% if user.username == form.instance.username %}
                                <input id="id_image" type="file" name="user_image" hidden/>
                                    <label for="id_image">
                                        <img class="rounded-circle account-img profile-img" style="max-width: 150px; cursor: pointer;" src="{{form.instance.user_image.url}}" title="Upload new image">
                                    </label>
                            {% else %}
                                <img class="rounded-circle account-img profile-img" style="max-width: 150px;" src="{{form.instance.user_image.url}}" alt="">
                            {% endif %}
                        <div class="media mb-4">
                            <div class="media-body text-center">
                                <h2 class="account-heading">
                                    {{form.instance.username}}
                                    <small class="text-muted">({{form.instance.status}})</small>
                                </h2>
                                <p class="text-secondary">{{form.instance.first_name}} {{form.instance.last_name}}</p>
                                <p class="text-secondary">{{form.instance.email}}</p>
                                <p class="text-secondary">{{form.instance.phone_number}}</p>
                            </div>
                        </div>

                        {% if user.username == form.instance.username %}
                        
                        <fieldset class="form-group">
                            <legend class="border-bottom mb-4 text-center">Edit Profile</legend>
                            <div class="form-row">
                                <div class="form-group col-md-6 col-12 mb-3 text-center">
                                    {{form.first_name|as_crispy_field}}
                                </div>
                                <div class="form-group col-md-6 col-12 mb-3 text-center">
                                    {{form.last_name|as_crispy_field}}
                                </div>
                            </div>
                            <div class="form-group mb-3 text-center">
                                {{form.email|as_crispy_field}}
                            </div>
                            <div class="form-group mb-3 text-center">
                                {{form.phone_number|as_crispy_field}}
                            </div>
                            <a href="#" class="text-center d-block">Change Password</a>
                        </fieldset>
                        
                        <div class="form-group text-center">
                            <button class="btn btn-outline-info w-100" type="submit">Update</button>
                        </div>
                        {% endif %}
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
